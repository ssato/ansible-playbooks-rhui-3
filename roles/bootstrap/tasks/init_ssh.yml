---
- name: Check if ssh key was generated before
  command: "test -f ~/.ssh/id_rsa"
  ignore_errors: true
  changed_when: false
  register: ssh_key_found

- name: Generate ssh key
  command: "ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa"
  when:
    - ssh_key_found|failed

# vim:sw=2:ts=2:et:
